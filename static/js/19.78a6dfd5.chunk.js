(this.webpackJsonpfiretable=this.webpackJsonpfiretable||[]).push([[19],{579:function(e,a){},581:function(e,a){},781:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(47),c=t(78),o=t(48),i=t(56),u=t(761),s=t(788),m=t(780),p=t(769),d=t(746),f=t(237),g=t.n(f),b=t(159),v=t(170),E=t.n(v),h=t(16),y=t(301),C=t(570),x=t.n(C),j=t(764),O=t(755),w=t(754),k=t(767),S=t(751),T=t(592),N=t.n(T),P=t(594),R=t.n(P),I=t(217),F=t.n(I),A=t(238),B=t.n(A),L=t(593),W=t.n(L),H=Object(r.a)((function(e){return Object(c.a)({root:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)},keyPair:{flexGrow:2,display:"flex",justifyItems:"space-between"},cloudIcon:{fontSize:64},uploadContainer:{margin:"auto"}})}));function z(e){var a=e.columns,t=e.addRow,r=H(),c=Object(n.useState)(!1),f=Object(h.a)(c,2),g=f[0],v=f[1],C=Object(n.useState)([]),T=Object(h.a)(C,2),P=T[0],I=T[1],A=Object(n.useState)([]),L=Object(h.a)(A,2),z=L[0],K=L[1],V=Object(n.useState)(),D=Object(h.a)(V,2),M=D[0],G=D[1],J=Object(n.useState)(),U=Object(h.a)(J,2),$=U[0],q=U[1],Y=Object(n.useState)([]),Q=Object(h.a)(Y,2),X=Q[0],Z=Q[1],_=Object(n.useCallback)((function(e){var a,t;return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:a=e[0],(t=new FileReader).onload=function(e){var a=e.target.result;x()(a,{},(function(e,a){var t=a.shift();Z(a),I(t)}))},t.readAsText(a);case 4:case"end":return n.stop()}}))}),[]),ee=Object(y.a)({onDrop:_,multiple:!1}),ae=ee.getRootProps,te=ee.getInputProps,ne=ee.isDragActive;function le(){v(!1),K([]),I([]),G(null),q(null)}return l.a.createElement("div",null,l.a.createElement(d.a,{color:"secondary",onClick:function(){v(!0)},endIcon:l.a.createElement(N.a,null)},"Import CSV"),l.a.createElement(S.a,{open:g,onClose:le,"aria-labelledby":"form-dialog-title"},l.a.createElement(w.a,{id:"form-dialog-title"},"Import a CSV file"),l.a.createElement(O.a,null,0===P.length?l.a.createElement("div",ae(),l.a.createElement("input",te()),l.a.createElement(o.a,{container:!0,direction:"column",justify:"center",alignContent:"center",alignItems:"center"},l.a.createElement(i.a,{variant:"subtitle1"},"Drag 'n' drop a .csv file here"),l.a.createElement(W.a,{className:r.cloudIcon}),l.a.createElement(i.a,{variant:"subtitle1"},"or"),ne?l.a.createElement("p",null,"Drop the file here ..."):l.a.createElement(d.a,{color:"secondary"},"click to select a file"))):l.a.createElement(o.a,{container:!0,direction:"column"},z.map((function(e,a){return l.a.createElement(o.a,{container:!0,direction:"row",alignItems:"center",justify:"space-between"},l.a.createElement(i.a,null,e.csvKey),l.a.createElement(R.a,null),l.a.createElement(i.a,null,e.columnKey),l.a.createElement(k.a,{onClick:function(){var e=Object(b.a)(z);e.splice(a,1),K(e)}},l.a.createElement(B.a,null)))})),l.a.createElement(o.a,{container:!0,direction:"row",alignItems:"center"},l.a.createElement(u.a,{className:r.formControl},l.a.createElement(s.a,{htmlFor:"csv-keys"},"csv Fields"),l.a.createElement(m.a,{value:M,onChange:function(e,a){G(e.target.value)},inputProps:{name:"csv",id:"csv-keys"}},P.map((function(e){return l.a.createElement(p.a,{value:e},e)})))),l.a.createElement(R.a,null),l.a.createElement(u.a,{className:r.formControl},l.a.createElement(s.a,{htmlFor:"column-keys"},"column Fields"),l.a.createElement(m.a,{value:$,onChange:function(e,a){q(e.target.value)},inputProps:{name:"column",id:"column-keys"}},a.map((function(e){return l.a.createElement(p.a,{value:e.key},e.name)})))),l.a.createElement(k.a,{onClick:function(){M&&$&&(K([].concat(Object(b.a)(z),[{csvKey:M,columnKey:$}])),q(null),G(null))}},l.a.createElement(F.a,null))))),l.a.createElement(j.a,null,l.a.createElement(d.a,{onClick:le,color:"primary"},"Cancel"),l.a.createElement(d.a,{onClick:function(){X.map((function(e){var a={};return z.forEach((function(t){a[t.columnKey]=e[P.indexOf(t.csvKey)]})),t(a),a})),le()},disabled:0===z.length,color:"primary"},"import"))))}var K=t(757),V=t(247),D=t(596),M=t.n(D),G=t(228),J=t(595),U=t(39),$={PaperProps:{style:{maxHeight:224,width:250}}},q=Object(r.a)((function(e){return Object(c.a)({root:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing(1),width:400},selectEmpty:{marginTop:e.spacing(2)},keyPair:{flexGrow:2,display:"flex",justifyItems:"space-between"},cloudIcon:{fontSize:64},uploadContainer:{margin:"auto"},chips:{display:"flex",flexWrap:"wrap",width:400},chip:{}})}));function Y(e){var a=e.columns,t=e.collection,r=e.filters,c=q(),o=Object(n.useState)(!1),i=Object(h.a)(o,2),f=i[0],g=i[1],b=Object(n.useState)([]),v=Object(h.a)(b,2),y=v[0],C=v[1],x=Object(n.useContext)(U.a);function k(){g(!1),C([])}function T(e){var a,n;return E.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return k(),x.open({message:"preparing file, download will start shortly",duration:5e3}),l.next=4,E.a.awrap(Object(G.c)({collectionPath:t,allFields:!Boolean(e),filters:r,columns:e||[]}));case 4:a=l.sent,n=new Blob([a.data],{type:"text/csv;charset=utf-8"}),Object(J.saveAs)(n,"".concat(t,".csv"));case 7:case"end":return l.stop()}}))}return l.a.createElement("div",null,l.a.createElement(d.a,{color:"secondary",onClick:function(){g(!0)},endIcon:l.a.createElement(M.a,null)},"Export CSV"),l.a.createElement(S.a,{open:f,onClose:k,"aria-labelledby":"form-dialog-title"},l.a.createElement(w.a,{id:"form-dialog-title"},"Export table into CSV"),l.a.createElement(O.a,null,l.a.createElement(u.a,{className:c.formControl},l.a.createElement(s.a,{id:"column-chip-label"},"Exportable columns"),l.a.createElement(m.a,{id:"column-chip",multiple:!0,value:y,onChange:function(e){C(e.target.value)},input:l.a.createElement(K.a,{id:"select-multiple-chip"}),renderValue:function(e){return l.a.createElement("div",{className:c.chips},e.map((function(e){return l.a.createElement(V.a,{key:e.key,label:e.name,className:c.chip})})))},MenuProps:$},a.map((function(e){return l.a.createElement(p.a,{key:e.key,value:e},e.name)})))),l.a.createElement(d.a,{onClick:function(){C(a)}},"Export All Columns")),l.a.createElement(j.a,null,l.a.createElement(d.a,{onClick:k,color:"primary"},"Cancel"),l.a.createElement(d.a,{onClick:function(){T()},color:"secondary"},"Export All Fields"),l.a.createElement(d.a,{onClick:function(){T(y)},disabled:0===y.length,color:"primary"},"Export"))))}var Q=t(160),X=t(279),Z=t.n(X),_=t(786),ee=t(762),ae=t(602),te=t.n(ae),ne=t(603),le=t.n(ne),re=t(7),ce=t(597),oe=t.n(ce),ie=t(370),ue=t(749),se=t(598),me=t.n(se),pe=t(599),de=t.n(pe),fe=t(601),ge=t.n(fe),be=t(600),ve=t.n(be),Ee=Object(r.a)((function(e){return Object(c.a)({root:{minWidth:200},selectRoot:{paddingRight:e.spacing(4)},paper:{overflow:"hidden",maxHeight:"calc(100% - 48px)"},menuChild:{padding:"0 ".concat(e.spacing(2),"px"),width:function(e){return e.width||480},maxWidth:"calc(100vw - ".concat(e.spacing(4),"px)")},grid:{outline:0},noMargins:{margin:0},searchRow:{marginTop:e.spacing(2)},chipListRow:{background:"".concat(e.palette.background.paper," no-repeat"),backgroundImage:"linear-gradient(to bottom, rgba(255,255,255,1), rgba(255,255,255,0)), linear-gradient(to top, rgba(255,255,255,1), rgba(255,255,255,0))",backgroundPosition:"-12px 0, -24px 100%",backgroundSize:"calc(100% + 12px + 12px) 16px",position:"relative","&::before, &::after":{content:'""',position:"absolute",top:0,left:0,right:0,zIndex:9,display:"block",height:16,background:"linear-gradient(to bottom, #fff, rgba(255, 255, 255, 0))"},"&::after":{top:"auto",bottom:0,background:"linear-gradient(to top, #fff, rgba(255, 255, 255, 0))"}},chipList:function(a){var t=a.searchable,n=a.freeText,l=a.multiple,r=0;return t&&(r-=64),l&&(r-=48),n&&(r-=48),n&&!l&&(r-=e.spacing(2)),{margin:"0px -".concat(e.spacing(2),"px"),padding:"12px ".concat(e.spacing(2)-e.spacing(.5),"px"),overflowY:"auto",maxHeight:"calc(100vh - 48px - ".concat(-r,"px)")}},chip:{margin:e.spacing(.5),maxWidth:"calc(100% - ".concat(e.spacing(1),"px)"),minHeight:32,height:"auto"},selectedChip:{backgroundColor:e.palette.divider},chipLabel:{maxWidth:"100%",padding:e.spacing(.75,1.5),whiteSpace:"normal"},footerRow:{marginBottom:e.spacing(2)},addCustomButton:{marginLeft:-e.spacing(1)},selectedRow:{"$chipListRow + &":{marginTop:-e.spacing(1)},"$footerRow + &":{marginTop:-e.spacing(2)},marginBottom:0,"& > div":{height:48}},selectAllButton:{marginRight:-e.spacing(1)},selectedNum:{fontFeatureSettings:'"tnum"'},measureChip:{visibility:"hidden",position:"absolute",top:0,left:0}})}));function he(e){var a=e.options,t=e.label,r=e.field,c=e.onChange,u=e.value,s=e.searchable,m=void 0!==s&&s,p=e.itemRenderer,f=e.freeText,g=void 0!==f&&f,v=e.multiple,E=void 0===v||v,y=e.selectAll,C=void 0===y||y,x=e.className,j=e.TextFieldProps,O=void 0===j?{}:j,w=Object(n.useState)(200),S=Object(h.a)(w,2),T=S[0],N=S[1],P=Ee({searchable:m,freeText:g,multiple:E,width:T}),R=Object(n.useState)(""),I=Object(h.a)(R,2),A=I[0],B=I[1],L=function(e){c(r,E?[].concat(Object(b.a)(u),[e.value]):[e.value])},W=function(e){c(r,E?u.filter((function(a){return a!==e.value})):[])},H="string"===typeof a[0]?a.map((function(e){return{label:e,value:e}})):a;if(g){var z=u.map((function(e){return{label:e,value:e}}));H=oe()(H,z,(function(e,a){return e.value===a.value}))}var K=Object(n.useState)(""),D=Object(h.a)(K,2),M=D[0],G=D[1],J=function(){L({value:M,label:M}),G("")},U=H.reduce((function(e,a){return a.label.length>e.length?a.label:e}),"");return l.a.createElement(l.a.Fragment,null,l.a.createElement(_.a,Object.assign({label:t,variant:"filled",select:!0,value:u,className:Object(re.a)(P.root,x)},O,{SelectProps:Object(Q.a)({renderValue:function(e){var a=e;return 1===a.length&&"string"===typeof a[0]?a:"".concat(a.length," of ").concat(H.length," selected")},classes:{root:P.selectRoot}},O.SelectProps,{multiple:!0,MenuProps:{classes:{paper:P.paper,list:P.menuChild},MenuListProps:{disablePadding:!0},getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}}}),ref:function(e){if(e){var a=e.getBoundingClientRect().width;T<a&&N(a)}}}),l.a.createElement(o.a,{container:!0,direction:"column",className:P.grid},m&&l.a.createElement(o.a,{item:!0,className:P.searchRow},l.a.createElement(_.a,{value:A,onChange:function(e){return B(e.target.value)},fullWidth:!0,variant:"filled",margin:"dense",label:"Search items",className:P.noMargins,InputProps:{endAdornment:l.a.createElement(ie.a,{position:"end"},l.a.createElement(me.a,null))},onClick:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}})),l.a.createElement(o.a,{item:!0,xs:!0,className:P.chipListRow},l.a.createElement("ul",{className:P.chipList},H.filter((function(e){return""===A||e.label.toUpperCase().includes(A.toUpperCase())})).map((function(e){var a=u.includes(e.value),t=l.a.createElement(l.a.Fragment,null);return E?a&&(t=l.a.createElement(de.a,null)):t=a?l.a.createElement(ve.a,null):l.a.createElement(ge.a,null),p?p(e,L,W,a):l.a.createElement(V.a,{key:"select-chip-".concat(r,"-").concat(e.value),className:Object(re.a)(P.chip,a&&P.selectedChip),classes:{label:P.chipLabel},onClick:function(t){t.stopPropagation(),a?W(e):L(e)},icon:t,label:e.label,variant:"outlined",component:"li",size:"medium"})})))),g&&l.a.createElement(o.a,{item:!0,className:P.footerRow},l.a.createElement(o.a,{container:!0,alignItems:"center",spacing:1},l.a.createElement(o.a,{item:!0},l.a.createElement(k.a,{onClick:J,className:P.addCustomButton},l.a.createElement(F.a,null))),l.a.createElement(o.a,{item:!0,xs:!0},l.a.createElement(_.a,{fullWidth:!0,variant:"filled",label:"Add new item",margin:"dense",className:P.noMargins,value:M,onChange:function(e){return G(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&J()},onKeyDown:function(e){return e.stopPropagation()}})))),E&&l.a.createElement(o.a,{item:!0,className:Object(re.a)(P.footerRow,P.selectedRow)},l.a.createElement(o.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},l.a.createElement(i.a,{variant:"button",color:"textSecondary",className:P.selectedNum},u.length," of ",H.length),l.a.createElement(d.a,{disabled:!1===C&&0===u.length,onClick:u.length!==H.length&&C?function(){return c(r,H.map((function(e){return e.value})))}:function(){return c(r,[])},color:"primary",className:P.selectAllButton},u.length!==H.length&&C?"Select All":"Clear Selection"))))),l.a.createElement(ue.a,null,l.a.createElement(V.a,{className:Object(re.a)(P.chip,P.measureChip),classes:{label:P.chipLabel},icon:l.a.createElement(de.a,null),label:U,variant:"outlined",role:"presentation",ref:function(e){if(e){var a=e.getBoundingClientRect().width;T<a&&N(a+32)}}})))}var ye=t(169),Ce=[{value:"==",label:"Equals",compatibleTypes:[ye.a.PhoneNumber,ye.a.color,ye.a.date,ye.a.dateTime,ye.a.simpleText,ye.a.singleSelect,ye.a.url,ye.a.email]},{value:"in",label:"matches any of",compatibleTypes:[ye.a.singleSelect]},{value:"array-contains",label:"Has",compatibleTypes:[ye.a.multiSelect]},{value:"array-contains-any",label:"Has any",compatibleTypes:[ye.a.multiSelect]},{value:"<",label:"<",compatibleTypes:[ye.a.number]},{value:"<=",label:"<=",compatibleTypes:[ye.a.number]},{value:">=",label:">=",compatibleTypes:[ye.a.number]},{value:">",label:">",compatibleTypes:[ye.a.number]},{value:"<",label:"before",compatibleTypes:[ye.a.date,ye.a.dateTime]},{value:">=",label:"after",compatibleTypes:[ye.a.date,ye.a.dateTime]}],xe=Object(r.a)((function(e){return Object(c.a)({paper:{width:640},closeButton:{position:"absolute",top:e.spacing(.5),right:e.spacing(.5)},content:{padding:e.spacing(4)},topRow:{marginBottom:e.spacing(3.5)},bottomButtons:{marginTop:e.spacing(4.5)}})})),je=function(e){var a,t=e.columns,r=e.setFilters,c=t.filter((function(e){return e.type!==ye.a.file&&e.type!==ye.a.image})).map((function(e){return{key:e.key,label:e.name,type:e.type,options:e.options}}));c.pop();var u=xe(),s=[],m=Object(n.useState)(),f=Object(h.a)(m,2),g=f[0],b=f[1],v=Object(n.useState)({key:"",operator:"",value:""}),E=Object(h.a)(v,2),y=E[0],C=E[1];Object(n.useEffect)((function(){if(g){var e={key:g.key,operator:"",value:""};[ye.a.PhoneNumber,ye.a.simpleText,ye.a.url,ye.a.email].includes(g.type)&&(e=Object(Q.a)({},e,{operator:"=="})),C(e)}}),[g]);var x=g?Ce.filter((function(e){return e.compatibleTypes.includes(g.type)})):[],j=Object(n.useState)(null),O=Object(h.a)(j,2),w=O[0],S=O[1],T=function(){return S(null)},N=Boolean(w),P=N?"simple-popper":void 0;return l.a.createElement(l.a.Fragment,null,l.a.createElement(d.a,{variant:"outlined",color:"primary",onClick:function(e){S(w?null:e.currentTarget)},startIcon:l.a.createElement(te.a,null)},0!==s.length&&s.length," Filters"),l.a.createElement(ee.a,{id:P,open:N,anchorEl:w,classes:{paper:u.paper},onClose:T,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},l.a.createElement(k.a,{className:u.closeButton,onClick:T},l.a.createElement(le.a,null)),l.a.createElement("div",{className:u.content},l.a.createElement(o.a,{container:!0,spacing:2},l.a.createElement(o.a,{item:!0,xs:4},l.a.createElement(i.a,{variant:"overline"},"Column")),l.a.createElement(o.a,{item:!0,xs:4},l.a.createElement(i.a,{variant:"overline"},"Condition")),l.a.createElement(o.a,{item:!0,xs:4},l.a.createElement(i.a,{variant:"overline"},"Value"))),l.a.createElement(o.a,{container:!0,spacing:2},l.a.createElement(o.a,{item:!0,xs:4},l.a.createElement(_.a,{select:!0,variant:"filled",hiddenLabel:!0,fullWidth:!0,value:null!==(a=null===g||void 0===g?void 0:g.key)&&void 0!==a?a:"",onChange:function(e){var a=Z()(c,(function(a){return a.key===e.target.value}));b(a)},SelectProps:{displayEmpty:!0}},l.a.createElement(p.a,{disabled:!0,value:"",style:{display:"none"}},"Select Column"),c.map((function(e){return l.a.createElement(p.a,{value:e.key},e.label)})))),l.a.createElement(o.a,{item:!0,xs:4},l.a.createElement(_.a,{select:!0,variant:"filled",hiddenLabel:!0,fullWidth:!0,value:y.operator,disabled:!y.key||0===(null===x||void 0===x?void 0:x.length),onChange:function(e){C((function(a){return Object(Q.a)({},a,{operator:e.target.value})}))},SelectProps:{displayEmpty:!0}},l.a.createElement(p.a,{disabled:!0,value:"",style:{display:"none"}},"Select Condition"),x.map((function(e){return l.a.createElement(p.a,{value:e.value},e.label)})))),l.a.createElement(o.a,{item:!0,xs:4},y.operator&&function(e,a){switch(console.log("selectedColumn.fieldType",e.type),e.type){case ye.a.email:case ye.a.PhoneNumber:case ye.a.simpleText:case ye.a.longText:return l.a.createElement(_.a,{onChange:function(e){var a=e.target.value;a&&C((function(e){return Object(Q.a)({},e,{value:a})}))},variant:"filled",hiddenLabel:!0,placeholder:"Text value"});case ye.a.singleSelect:var t=(null===y||void 0===y?void 0:y.value)?Array.isArray(y.value)?y.value:[y.value]:[];return l.a.createElement(he,{onChange:function(e,t){C("=="===a?function(e){return Object(Q.a)({},e,{value:t[0]})}:function(e){return Object(Q.a)({},e,{value:t})})},options:e.options,label:"",field:"",value:t,multiple:"in"===a,TextFieldProps:{hiddenLabel:!0}});default:return l.a.createElement(l.a.Fragment,null,"Not available")}}(g,y.operator))),l.a.createElement(o.a,{container:!0,className:u.bottomButtons,justify:"space-between"},l.a.createElement(d.a,{disabled:""==y.key,color:"secondary",onClick:function(){r([]),C({key:"",operator:"",value:""}),b(null)}},"Clear"),l.a.createElement(d.a,{disabled:""==y.value,color:"primary",onClick:function(){r([y]),T()}},"Apply")))))},Oe=Object(r.a)((function(e){return Object(c.a)({root:{width:"100%",margin:0,padding:e.spacing(0,1),minHeight:56},collectionName:{textTransform:"uppercase"},formControl:{minWidth:120}})}));a.default=function(e){var a=e.collection,t=e.rowHeight,n=e.updateConfig,r=e.columns,c=e.addRow,f=e.filters,b=e.tableActions,v=Oe();return l.a.createElement(o.a,{container:!0,alignItems:"center",spacing:2,className:v.root},l.a.createElement(o.a,{item:!0},l.a.createElement(i.a,{variant:"h6",className:v.collectionName},a)),l.a.createElement(o.a,{item:!0,xs:!0},l.a.createElement(u.a,{variant:"outlined",className:v.formControl},l.a.createElement(s.a,{htmlFor:"outlined-age-simple"},"Row Height"),l.a.createElement(m.a,{value:t||35,onChange:function(e,a){n("rowHeight",e.target.value)},labelWidth:90,inputProps:{name:"rowHeight",id:"outlined-rowHeight-simple"},margin:"dense"},l.a.createElement(p.a,{value:35},"Tall"),l.a.createElement(p.a,{value:60},"Grande"),l.a.createElement(p.a,{value:100},"Venti"),l.a.createElement(p.a,{value:150},"Trenta")))),l.a.createElement(je,{columns:r,tableFilters:f,setFilters:b.table.filter}),l.a.createElement(o.a,{item:!0},l.a.createElement(o.a,{container:!0,spacing:1},l.a.createElement(o.a,{item:!0},l.a.createElement(Y,{columns:r.map((function(e){return{key:e.key,name:e.name,config:e.config,type:e.type}})),collection:a,filters:f})),l.a.createElement(o.a,{item:!0},l.a.createElement(z,{columns:r,addRow:c})),l.a.createElement(o.a,{item:!0},l.a.createElement(d.a,{color:"secondary",onClick:function(){return c()},endIcon:l.a.createElement(g.a,null)},"Add Row")))))}}}]);
//# sourceMappingURL=19.78a6dfd5.chunk.js.map