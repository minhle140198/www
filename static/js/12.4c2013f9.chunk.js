(this.webpackJsonpfiretable=this.webpackJsonpfiretable||[]).push([[12],{169:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return I})),a.d(t,"b",(function(){return _}));var n,r=a(0),l=a.n(r),o=a(438),c=a.n(o),i=a(440),u=a.n(i),s=a(436),d=a.n(s),m=a(437),p=a.n(m),b=a(439),f=a.n(b),h=a(446),g=a.n(h),E=a(448),v=a.n(E),w=a(447),y=a.n(w),O=a(449),j=a.n(O),q=a(442),k=a.n(q),x=a(443),C=a.n(x),S=a(445),R=a.n(S),T=a(444),N=a.n(T),A=a(441),z=a.n(A),F=a(726),L=a(723),B=a(780),H=a(769);!function(e){e.simpleText="SIMPLE_TEXT",e.longText="LONG_TEXT",e.richText="RICH_TEXT",e.email="EMAIL",e.PhoneNumber="PHONE_NUMBER",e.checkBox="CHECK_BOX",e.date="DATE",e.dateTime="DATE_TIME",e.number="NUMBER",e.url="URL",e.color="COLOR",e.rating="RATING",e.image="IMAGE",e.file="FILE",e.singleSelect="SINGLE_SELECT",e.multiSelect="MULTI_SELECT",e.documentSelect="DOCUMENT_SELECT",e.action="ACTION",e.last="LAST"}(n||(n={}));var P=[{icon:l.a.createElement(d.a,null),name:"Simple Text",type:n.simpleText},{icon:l.a.createElement(p.a,null),name:"Long Text",type:n.longText},{icon:l.a.createElement(c.a,null),name:"Email",type:n.email},{icon:l.a.createElement(f.a,null),name:"Phone",type:n.PhoneNumber},{icon:l.a.createElement(u.a,null),name:"Check Box",type:n.checkBox},{icon:l.a.createElement(z.a,null),name:"Number",type:n.number},{icon:l.a.createElement(k.a,null),name:"Date",type:n.date},{icon:l.a.createElement(C.a,null),name:"Time",type:n.dateTime},{icon:l.a.createElement(N.a,null),name:"URL",type:n.url},{icon:l.a.createElement(R.a,null),name:"Rating",type:n.rating},{icon:l.a.createElement(g.a,null),name:"Image",type:n.image},{icon:l.a.createElement(y.a,null),name:"File",type:n.file},{icon:l.a.createElement(v.a,null),name:"Single Select",type:n.singleSelect},{icon:l.a.createElement(v.a,null),name:"Multi Select",type:n.multiSelect},{icon:l.a.createElement(v.a,null),name:"Doc Select",type:n.documentSelect},{icon:l.a.createElement(v.a,null),name:"Action",type:n.action},{icon:l.a.createElement(v.a,null),name:"Rich Text",type:n.richText},{icon:l.a.createElement(j.a,null),name:"Color",type:n.color}],I=function(e){return Object(L.a)(Object(F.a)("type",e))(P).icon},_=function(e,t){return l.a.createElement(B.a,{value:e||"",onChange:t,inputProps:{name:"type",id:"type"}},P.map((function(e){return l.a.createElement(H.a,{key:"select-field-".concat(e.name),id:"select-field-".concat(e.type),value:e.type},l.a.createElement(l.a.Fragment,null,e.name))})))}},176:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(0),r=a(18);function l(){return Object(n.useContext)(r.e)}},190:function(e,t,a){"use strict";var n=a(0),r=a.n(n).a.createContext({open:void 0,close:void 0,cancel:void 0,editorValue:void 0,setEditorValue:void 0,fieldType:null});t.a=r},220:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n,r=a(16),l=a(160),o=a(57),c=a(0);!function(e){e[e.update=0]="update",e[e.delete=1]="delete"}(n||(n={}));var i=function(e,t){switch(t.action){case n.update:return e.ref.update(Object(l.a)({},t.data)),Object(l.a)({},e,{doc:Object(l.a)({},e.doc,{},t.data)});case n.delete:return e.ref.delete(),null;default:return Object(l.a)({},e,{},t)}},u={path:null,prevPath:null,doc:null,ref:null,loading:!0};t.b=function(e){var t=Object(c.useReducer)(i,Object(l.a)({},u,{},e)),a=Object(r.a)(t,2),n=a[0],s=a[1];return Object(c.useEffect)((function(){var e=n.path,t=n.prevPath,a=n.unsubscribe;e&&e!==t&&(a&&a(),function(){s({prevPath:n.path});var e=o.c.doc(n.path).onSnapshot((function(e){if(e.exists){var t=e.data(),a=e.id,n=Object(l.a)({},t,{id:a});s({doc:n,ref:e.ref,loading:!1})}else s({loading:!1})}));s({unsubscribe:e})}())}),[n]),Object(c.useEffect)((function(){return function(){n.unsubscribe&&n.unsubscribe()}}),[]),[n,s]}},221:function(e,t,a){"use strict";var n=a(16),r=a(0),l=a.n(r),o=a(746),c=a(751),i=a(764),u=a(755),s=a(756),d=a(754),m=a(786),p=a(47),b=a(78),f=Object(p.a)((function(e){return Object(b.a)({root:{display:"flex",flexWrap:"wrap"},dryWrapper:{},dryField:{}})}));t.a=function(e){var t=e.children,a=e.message,p=e.confirmationCommand,b=f(),h=Object(r.useState)(!1),g=Object(n.a)(h,2),E=g[0],v=g[1],w=Object(r.useState)(""),y=Object(n.a)(w,2),O=y[0],j=y[1],q=function(){v(!1)},k=t.props.onChange||t.props.onClick,x=l.a.cloneElement(t,{onClick:function(){v(!0)},onChange:function(){v(!0)}});return l.a.createElement(l.a.Fragment,null,x,l.a.createElement(c.a,{open:E,onClose:q},l.a.createElement(d.a,null,a&&a.title||"Are you sure?"),a&&l.a.createElement(u.a,null,a.customBody,a.body&&l.a.createElement(s.a,null,a.body),p&&l.a.createElement("div",{className:b.dryWrapper},l.a.createElement(s.a,null,"Type ",p," below to continue:"),l.a.createElement(m.a,{value:O,variant:"filled",onChange:function(e){j(e.target.value)},className:b.dryField,InputProps:{disableUnderline:!0},autoFocus:!0,margin:"dense",label:p,fullWidth:!0}))),l.a.createElement(i.a,null,l.a.createElement(o.a,{onClick:q,color:"primary"},a&&a.cancel||"Cancel"),l.a.createElement(o.a,{onClick:function(){k(),q()},color:"primary",variant:"contained",autoFocus:!0,disabled:!!p&&O!==p},a&&a.confirm||"Confirm"))))}},228:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return o}));var n,r=a(57);!function(e){e.updateAlgoliaRecord="updateAlgoliaRecord",e.deleteAlgoliaRecord="deleteAlgoliaRecord",e.exportTable="exportTable"}(n||(n={}));var l=function(e){return r.d.httpsCallable(n.updateAlgoliaRecord)(e)},o=(r.d.httpsCallable(n.deleteAlgoliaRecord),function(e){return r.d.httpsCallable(n.exportTable)(e)})},253:function(e,t,a){"use strict";a.d(t,"a",(function(){return w}));var n=a(16),r=a(0),l=a.n(r),o=a(254),c=a.n(o),i=a(217),u=a.n(i),s=a(176),d=a(747),m=a(750),p=a(751),b=a(754),f=a(755),h=a(756),g=a(786),E=a(764),v=a(746);function w(e){var t=e.classes,a=void 0===t?{}:t,o=e.createTable,i=Object(s.a)(),w=l.a.useState(!1),y=Object(n.a)(w,2),O=y[0],j=y[1],q=Object(r.useState)(""),k=Object(n.a)(q,2),x=k[0],C=k[1],S=Object(r.useState)(""),R=Object(n.a)(S,2),T=R[0],N=R[1];function A(){C(""),N(""),j(!1)}return Object(r.useEffect)((function(){N(c()(x))}),[x]),l.a.createElement("div",null,l.a.createElement(d.a,{title:"Create a table"},l.a.createElement(m.a,{className:a.fab,color:"secondary","aria-label":"Create table",onClick:function(){j(!0)}},l.a.createElement(u.a,null))),l.a.createElement(p.a,{open:O,onClose:A,"aria-labelledby":"form-dialog-title"},l.a.createElement(b.a,{id:"form-dialog-title"},"New table"),l.a.createElement(f.a,null,l.a.createElement(h.a,null,"Create a new Table"),l.a.createElement(g.a,{autoFocus:!0,onChange:function(e){C(e.target.value)},margin:"dense",id:"name",label:"Table Name",type:"email",fullWidth:!0}),l.a.createElement(g.a,{value:T,onChange:function(e){N(e.target.value)},margin:"dense",id:"collection",label:"Collection Name",type:"email",fullWidth:!0})),l.a.createElement(E.a,null,l.a.createElement(v.a,{onClick:A,color:"primary"},"Cancel"),l.a.createElement(v.a,{onClick:function(){o(x,T),"/"===i.location.pathname?i.history.push("table/".concat(T)):i.history.push(T),A()},color:"primary"},"Create"))))}},259:function(e,t,a){"use strict";var n=a(159),r=a(16),l=a(0),o=a(220),c=a(57);t.a=function(){var e=Object(o.b)({path:"_FIRETABLE_/settings"}),t=Object(r.a)(e,2),a=t[0],i=t[1];Object(l.useEffect)((function(){var e=a.doc,t=a.tables;e&&t!==e.tables&&i({tables:e.tables})}),[a]);return[a,function(e,t){var r=a.tables;r?i({action:o.a.update,data:{tables:[].concat(Object(n.a)(r),[{name:e,collection:t}])}}):c.c.doc("_FIRETABLE_/settings").set({tables:[{name:e,collection:t}]},{merge:!0}),c.c.collection(t).doc("_FIRETABLE_").set({columns:[]})}]}},260:function(e,t,a){"use strict";a.d(t,"b",(function(){return C})),a.d(t,"d",(function(){return S})),a.d(t,"c",(function(){return R})),a.d(t,"a",(function(){return T})),a.d(t,"e",(function(){return N}));var n=a(170),r=a.n(n),l=a(159),o=a(171),c=a(0),i=a.n(c),u=a(169),s=a(320),d=a(452),m=a.n(d),p=a(228),b=s.Editors.AutoComplete,f=Object(c.lazy)((function(){return a.e(22).then(a.bind(null,624))})),h=Object(c.lazy)((function(){return Promise.all([a.e(11),a.e(28)]).then(a.bind(null,625))})),g=Object(c.lazy)((function(){return a.e(30).then(a.bind(null,725))})),E=Object(c.lazy)((function(){return a.e(29).then(a.bind(null,727))})),v=Object(c.lazy)((function(){return a.e(26).then(a.bind(null,724))})),w=Object(c.lazy)((function(){return a.e(23).then(a.bind(null,626))})),y=Object(c.lazy)((function(){return Promise.all([a.e(1),a.e(17)]).then(a.bind(null,628))})),O=Object(c.lazy)((function(){return Promise.all([a.e(1),a.e(15)]).then(a.bind(null,630))})),j=Object(c.lazy)((function(){return a.e(21).then(a.bind(null,632))})),q=Object(c.lazy)((function(){return a.e(31).then(a.bind(null,634))})),k=Object(c.lazy)((function(){return Promise.all([a.e(8),a.e(27)]).then(a.bind(null,635))})),x=Object(c.lazy)((function(){return a.e(25).then(a.bind(null,721))})),C=function(e){switch(e){case u.a.date:case u.a.dateTime:case u.a.rating:case u.a.number:case u.a.checkBox:case u.a.multiSelect:case u.a.image:case u.a.file:case u.a.longText:case u.a.richText:case u.a.documentSelect:case u.a.color:case u.a.action:case u.a.last:return!1;default:return!0}},S=function(e,t){return function(a){var n,c,i,u,s;return r.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(n=t.ref.parent.path,c={collection:n,id:t.ref.id,doc:Object(o.a)({},e,a)},null===a&&void 0===a){d.next=9;break}return u=new Date,s=[e],t.updatedFields&&(s=m()([e].concat(Object(l.a)(t.updatedFields)))),t.ref.update((i={},Object(o.a)(i,e,a),Object(o.a)(i,"updatedAt",u),Object(o.a)(i,"updatedFields",s),i)),d.next=9,r.a.awrap(Object(p.b)(c));case 9:case"end":return d.stop()}}))}},R=function(e){var t=e.fromRowData,a=e.updated;"CELL_UPDATE"===e.action&&S(Object.keys(a)[0],t)(Object.values(a)[0])},T=function(e){var t=e.type,a=e.key,n=e.options;switch(t){case u.a.date:case u.a.dateTime:return function(e,t){return function(a){return i.a.createElement(h,Object.assign({},a,{onSubmit:S(e,a.row),fieldType:t}))}}(a,t);case u.a.rating:return function(e){return i.a.createElement(c.Suspense,{fallback:i.a.createElement("div",null)},i.a.createElement(g,Object.assign({},e,{onSubmit:S(a,e.row),value:"number"===typeof e.value?e.value:0})))};case u.a.number:return function(e){return i.a.createElement(c.Suspense,{fallback:i.a.createElement("div",null)},i.a.createElement(E,Object.assign({},e,{onSubmit:S(a,e.row),value:"number"===typeof e.value?e.value:void 0})))};case u.a.color:return function(e){return i.a.createElement(c.Suspense,{fallback:i.a.createElement("div",null)},i.a.createElement(k,Object.assign({},e,{onSubmit:S(a,e.row)})))};case u.a.checkBox:return function(t){return i.a.createElement(c.Suspense,{fallback:i.a.createElement("div",null)},i.a.createElement(v,Object.assign({column:e},t,{onSubmit:S(a,t.row)})))};case u.a.url:return function(e){return i.a.createElement(c.Suspense,{fallback:i.a.createElement("div",null)},i.a.createElement(w,e))};case u.a.action:return function(e){return i.a.createElement(c.Suspense,{fallback:i.a.createElement("div",null)},i.a.createElement(x,Object.assign({fieldName:a},e,{onSubmit:S(a,e.row)})))};case u.a.multiSelect:return function(e){return i.a.createElement(c.Suspense,{fallback:i.a.createElement("div",null)},i.a.createElement(f,Object.assign({},e,{onSubmit:S(a,e.row),options:n})))};case u.a.image:return function(e){return i.a.createElement(c.Suspense,{fallback:i.a.createElement("div",null)},i.a.createElement(y,Object.assign({},e,{onSubmit:S(a,e.row),fieldName:a})))};case u.a.file:return function(e){return i.a.createElement(c.Suspense,{fallback:i.a.createElement("div",null)},i.a.createElement(O,Object.assign({},e,{onSubmit:S(a,e.row),fieldName:a})))};case u.a.longText:return function(e){return i.a.createElement(c.Suspense,{fallback:i.a.createElement("div",null)},i.a.createElement(j,Object.assign({},e,{fieldName:a,onSubmit:S(a,e.row)})))};case u.a.richText:return function(e){return i.a.createElement(c.Suspense,{fallback:i.a.createElement("div",null)},i.a.createElement(q,Object.assign({},e,{fieldName:a,onSubmit:S(a,e.row)})))};default:return!1}},N=function(e){if(e){var t=e.map((function(e){return{id:e,value:e,title:e,text:e}}));return i.a.createElement(b,{options:t})}return i.a.createElement(b,{options:[]})}},319:function(e,t,a){"use strict";var n=a(0),r=a.n(n).a.createContext({value:void 0});t.a=r},389:function(e,t,a){"use strict";var n=a(171),r=a(160),l=a(159),o=a(16),c=a(0),i=a(220),u=a(254),s=a.n(u),d=a(236),m=a.n(d);t.a=function(e){var t=Object(i.b)({path:"".concat(e,"/_FIRETABLE_")}),a=Object(o.a)(t,2),u=a[0],d=a[1];Object(c.useEffect)((function(){var e=u.doc,t=u.columns;e&&t!==e.columns&&d({columns:e.columns,rowHeight:e.rowHeight})}),[u.doc]);return[u,{updateColumn:function(e,t){var a=u.columns;t.forEach((function(t){a[e][t.field]=t.value})),d({action:i.a.update,data:{columns:a}})},updateConfig:function(e,t){d({action:i.a.update,data:Object(n.a)({},e,t)})},add:function(e,t,a){var n=u.columns,o=s()(e);d({action:i.a.update,data:{columns:[].concat(Object(l.a)(n),[Object(r.a)({name:e,key:o,type:t},a)])}})},resize:function(e,t){var a=u.columns;a[e].width=t,d({action:i.a.update,data:{columns:a}})},setTable:function(e){d({path:"".concat(e,"/_FIRETABLE_"),columns:[],doc:null,loading:!0})},remove:function(e){var t=u.columns;t.splice(e,1),d({action:i.a.update,data:{columns:t}})},reorder:function(e,t){var a=u.columns,n=m()(a,["key",e]),r=m()(a,["key",t]),o=Object(l.a)(a);!function(e,t,a){for(;t<0;)t+=e.length;for(;a<0;)a+=e.length;if(a>=e.length)for(var n=a-e.length+1;n--;)e.push(void 0);e.splice(a,0,e.splice(t,1)[0])}(o,n,r),d({action:i.a.update,data:{columns:o}})}}]}},777:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(402),o=a.n(l),c=a(16),i=a(37),u=a(311),s=a.n(u),d=a(310),m=a.n(d),p=a(765),b=a(766),f=a(767),h=a(746),g=a(435),E=a.n(g),v=a(768),w=a(253),y=a(259),O=a(176),j=a(319),q=m()((function(e){return s()({text:{padding:e.spacing(2,2,0)},paper:{paddingBottom:20,paddingTop:5},subheader:{backgroundColor:e.palette.background.paper},appBar:{top:"auto",bottom:0},grow:{flexGrow:1},fab:{position:"absolute",zIndex:1,top:-30,right:20,margin:"0 auto"},button:{color:"#fff",marginLeft:8},skeleton:{marginLeft:8,borderRadius:5},routes:{flex:"flex-shrink",overflowX:"auto"}})})),k=function(e){var t=Object(O.a)(),a=q(),n=Object(y.a)(),l=Object(c.a)(n,2),o=l[0],u=l[1];return r.a.createElement(j.a.Provider,{value:{value:o.tables}},r.a.createElement(r.a.Fragment,null,e.children,r.a.createElement(p.a,{position:"fixed",color:"primary",className:a.appBar},r.a.createElement(b.a,null,r.a.createElement(f.a,{edge:"start",color:"inherit","aria-label":"go home",component:i.b,to:"/"},r.a.createElement(E.a,null)),o.tables?r.a.createElement("div",{className:a.routes},o.tables.map((function(e){return r.a.createElement(h.a,{key:e.collection,onClick:function(){e.collection!==t.location.pathname.replace("/table/","")&&t.history.push(e.collection)},className:a.button},e.name)}))):r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,{variant:"rect",width:120,height:40,className:a.skeleton}),r.a.createElement(v.a,{variant:"rect",width:120,height:40,className:a.skeleton}),r.a.createElement(v.a,{variant:"rect",width:120,height:40,className:a.skeleton}),r.a.createElement(v.a,{variant:"rect",width:120,height:40,className:a.skeleton})),r.a.createElement(w.a,{classes:a,createTable:u}),r.a.createElement("div",{className:a.grow})))))},x=a(171),C=a(64),S=a(159),R=a(170),T=a.n(R),N=a(160),A=a(747),z=a(48),F=a(56),L=a(559),B=a.n(L),H=a(560),P=a.n(H),I=a(221),_=a(238),D=a.n(_),W=a(561),V=a.n(W),U=a(237),G=a.n(U),M=a(47),X=a(78),J=Object(M.a)((function(e){return Object(X.a)({typography:{padding:1},header:{},columnIconContainer:{"& > svg":{display:"block"}},columnNameContainer:{flexShrink:1,overflow:"hidden",margin:e.spacing(0,.5)},columnName:{fontSize:"0.875rem",lineHeight:1},headerButton:{width:"100%"},tableActions:{display:"flex",flex:"wrap",alignContent:"center"},formControl:{margin:2,minWidth:120}})})),K=a(36),$=a(41),Q=function(e){var t=e.isLoading,a=e.tableHeight,n=e.addRow;return t?r.a.createElement(K.a,{message:"Fetching rows"}):r.a.createElement("div",{style:{height:a,textAlign:"center",backgroundColor:"#eee",padding:"100px"}},r.a.createElement($.a,{message:"No data to show"}),r.a.createElement(h.a,{onClick:function(){n()}},"Add Row"))},Y=a(260),Z=a(320),ee=a(269),te=a.n(ee),ae=a(498),ne=a.n(ae),re=a(499),le=a.n(re),oe=Object(n.lazy)((function(){return a.e(24).then(a.t.bind(null,775,7))})),ce=Z.DraggableHeader.DraggableContainer,ie=function(e,t){return ne()(le()(e,t,te.a))},ue=r.a.memo((function(e){var t=e.onHeaderDrop,a=e.rowHeight,l=e.columns,o=e.RowRenderer,c=e.handleRowGetter,i=e.tableHeight,u=e.onGridRowsUpdated,s=e.rows,d=e.resizeColumn,m=e.loadingRows,p=e.addRow,b=e.setSelectedCell;return r.a.createElement(n.Suspense,{fallback:r.a.createElement(K.a,{message:"Loading table"})},r.a.createElement(ce,{onHeaderDrop:t},r.a.createElement(oe,{headerRowHeight:47,rowRenderer:o,rowHeight:a,columns:l,enableCellSelect:!0,rowGetter:c,rowsCount:s.length,onGridRowsUpdated:u,minHeight:i,onCellSelected:function(e){var t=s[e.rowIdx],a=l[e.idx];Object(Y.b)(a.type)&&b({row:t,column:a})},onColumnResize:function(e,t){return d(e,t)},emptyRowsView:function(){return r.a.createElement(Q,{isLoading:m,tableHeight:i,addRow:p})}})))}),(function(e,t){return ie(e.columns,t.columns)&&ie(e.rows,t.rows)})),se=a(190),de=a(759),me=a(169),pe=a(783),be=a(752),fe=a(149),he=Object(M.a)((function(e){return Object(X.a)({test:{position:"absolute",top:10,left:10},modal:{display:"flex",alignItems:"center",justifyContent:"center",maxWidth:600,width:"100%"},paper:{padding:e.spacing(2)},root:{margin:"".concat(e.spacing(1),"px 0"),"&:focus-within $sectionTitle":{color:"dark"===e.palette.type?e.palette.primary.dark:e.palette.primary.main}},typography:{padding:e.spacing(2)},textArea:{fontSize:16,minWidth:230,width:"100%"},quillEditor:{minHeight:100,"& .ql-toolbar":{borderRadius:"".concat(e.shape.borderRadius,"px ").concat(e.shape.borderRadius,"px 0 0"),transition:e.transitions.create("border-color",{duration:e.transitions.duration.shortest})},"& .ql-container":{borderRadius:"0 0 ".concat(e.shape.borderRadius,"px ").concat(e.shape.borderRadius,"px"),transition:e.transitions.create("border-color",{duration:e.transitions.duration.shortest})},"& .ql-editor":{minHeight:100,fontFamily:e.typography.fontFamily,fontSize:".875rem",color:e.palette.text.primary,"&.ql-blank::before":{fontStyle:"normal",color:e.palette.text.disabled}},"&:focus-within .ql-toolbar.ql-snow, &:focus-within .ql-container.ql-snow":{borderColor:e.palette.primary.main},"& .ql-snow.ql-toolbar button, & .ql-snow .ql-picker-label":{borderRadius:e.shape.borderRadius/2,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},"& .ql-snow .ql-stroke":{stroke:e.palette.text.primary,transition:e.transitions.create("stroke",{duration:e.transitions.duration.shortest})},"& .ql-snow .ql-fill":{fill:e.palette.text.primary,transition:e.transitions.create("fill",{duration:e.transitions.duration.shortest})},"& button:hover .ql-stroke":{stroke:"".concat(e.palette.primary.main," !important")},"& button:hover .ql-fill":{fill:"".concat(e.palette.primary.main," !important")},"& .ql-snow.ql-toolbar .ql-active":{backgroundColor:e.palette.primary.light,"& .ql-stroke":{stroke:"".concat(e.palette.primary.main," !important")},"& .ql-fill":{fill:"".concat(e.palette.primary.main," !important")}},"& .ql-snow.ql-toolbar button:hover, & .ql-snow .ql-toolbar button:hover, & .ql-snow.ql-toolbar button:focus, & .ql-snow .ql-toolbar button:focus, & .ql-snow.ql-toolbar button.ql-active, & .ql-snow .ql-toolbar button.ql-active, & .ql-snow.ql-toolbar .ql-picker-label:hover, & .ql-snow .ql-toolbar .ql-picker-label:hover, & .ql-snow.ql-toolbar .ql-picker-label.ql-active, & .ql-snow .ql-toolbar .ql-picker-label.ql-active, & .ql-snow.ql-toolbar .ql-picker-item:hover, & .ql-snow .ql-toolbar .ql-picker-item:hover, & .ql-snow.ql-toolbar .ql-picker-item.ql-selected, & .ql-snow .ql-toolbar .ql-picker-item.ql-selected":{color:e.palette.primary.main,"& polygon":{stroke:e.palette.primary.main+" !important"}}}})})),ge=function(e){var t=e.children,a=he(),l=Object(n.useContext)(se.a),o=null!==l.editorValue;return r.a.createElement(pe.a,{className:a.modal,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:o,onClose:function(e,t){"escapeKeyDown"===t&&l.cancel()}},r.a.createElement(be.a,{in:o},r.a.createElement(fe.a,{className:a.paper},t,r.a.createElement(z.a,{container:!0,justify:"space-between"},r.a.createElement(h.a,{size:"small",variant:"outlined",color:"primary",onClick:l.close},"Save"),r.a.createElement(h.a,{size:"small",variant:"outlined",color:"secondary",onClick:l.cancel},"cancel")))))},Ee=Object(M.a)((function(e){return Object(X.a)({test:{position:"absolute",top:10,left:10},modal:{display:"flex",alignItems:"center",justifyContent:"center",maxWidth:600,width:"100%"},paper:{padding:e.spacing(2)},root:{position:"relative",display:"flex",flexWrap:"wrap"},typography:{padding:e.spacing(2)},textArea:{fontSize:16,minWidth:230,width:"100%"}})})),ve=function(e){var t=Ee(),a=Object(n.useContext)(se.a);return a.fieldType!==me.a.longText?r.a.createElement(r.a.Fragment,null):r.a.createElement(ge,null,r.a.createElement(de.a,{id:"TextareaAutosize",className:t.textArea,rowsMax:25,"aria-label":"maximum height",placeholder:"enter text",defaultValue:a.editorValue,autoFocus:!0,onChange:function(e){a.setEditorValue(e.target.value)}}))},we=a(509),ye=a.n(we),Oe=a(540),je=a(541),qe=a.n(je),ke=(a(558),a(57));we.Quill.register("modules/imageDrop",Oe.a);var xe=Object(M.a)((function(e){return Object(X.a)({test:{position:"absolute",top:10,left:10},modal:{display:"flex",alignItems:"center",justifyContent:"center",maxWidth:600,width:"100%"},paper:{padding:e.spacing(2)},root:{margin:"".concat(e.spacing(1),"px 0"),"&:focus-within $sectionTitle":{color:"dark"===e.palette.type?e.palette.primary.dark:e.palette.primary.main}},typography:{padding:e.spacing(2)},textArea:{fontSize:16,minWidth:230,width:"100%"},quillEditor:{minHeight:100,"& .ql-toolbar":{borderRadius:"".concat(e.shape.borderRadius,"px ").concat(e.shape.borderRadius,"px 0 0"),transition:e.transitions.create("border-color",{duration:e.transitions.duration.shortest})},"& .ql-container":{borderRadius:"0 0 ".concat(e.shape.borderRadius,"px ").concat(e.shape.borderRadius,"px"),transition:e.transitions.create("border-color",{duration:e.transitions.duration.shortest})},"& .ql-editor":{minHeight:100,fontFamily:e.typography.fontFamily,fontSize:".875rem",color:e.palette.text.primary,"&.ql-blank::before":{fontStyle:"normal",color:e.palette.text.disabled}},"&:focus-within .ql-toolbar.ql-snow, &:focus-within .ql-container.ql-snow":{borderColor:e.palette.primary.main},"& .ql-snow.ql-toolbar button, & .ql-snow .ql-picker-label":{borderRadius:e.shape.borderRadius/2,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},"& .ql-snow .ql-stroke":{stroke:e.palette.text.primary,transition:e.transitions.create("stroke",{duration:e.transitions.duration.shortest})},"& .ql-snow .ql-fill":{fill:e.palette.text.primary,transition:e.transitions.create("fill",{duration:e.transitions.duration.shortest})},"& button:hover .ql-stroke":{stroke:"".concat(e.palette.primary.main," !important")},"& button:hover .ql-fill":{fill:"".concat(e.palette.primary.main," !important")},"& .ql-snow.ql-toolbar .ql-active":{backgroundColor:e.palette.primary.light,"& .ql-stroke":{stroke:"".concat(e.palette.primary.main," !important")},"& .ql-fill":{fill:"".concat(e.palette.primary.main," !important")}},"& .ql-snow.ql-toolbar button:hover, & .ql-snow .ql-toolbar button:hover, & .ql-snow.ql-toolbar button:focus, & .ql-snow .ql-toolbar button:focus, & .ql-snow.ql-toolbar button.ql-active, & .ql-snow .ql-toolbar button.ql-active, & .ql-snow.ql-toolbar .ql-picker-label:hover, & .ql-snow .ql-toolbar .ql-picker-label:hover, & .ql-snow.ql-toolbar .ql-picker-label.ql-active, & .ql-snow .ql-toolbar .ql-picker-label.ql-active, & .ql-snow.ql-toolbar .ql-picker-item:hover, & .ql-snow .ql-toolbar .ql-picker-item:hover, & .ql-snow.ql-toolbar .ql-picker-item.ql-selected, & .ql-snow .ql-toolbar .ql-picker-item.ql-selected":{color:e.palette.primary.main,"& polygon":{stroke:e.palette.primary.main+" !important"}}}})}));function Ce(e,t){var a,n,r;return T.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return a=ke.b.ref("RTE").child(e),l.next=3,T.a.awrap(a.put(t));case 3:return n=l.sent,l.next=6,T.a.awrap(ke.b.ref("RTE").child(n.metadata.fullPath).getDownloadURL());case 6:return r=l.sent,l.abrupt("return",r);case 8:case"end":return l.stop()}}))}var Se=function(e){var t=xe(),a=Object(n.useContext)(se.a),l=Object(n.useRef)(null);return Object(n.useEffect)((function(){l.current&&l.current.getEditor().getModule("toolbar").addHandler("image",function(e){return function(){var t=new Date,a=e.current.getEditor(),n=document.body.querySelector("input.ql-image[type=file]");null==n&&((n=document.createElement("input")).setAttribute("type","file"),n.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),n.classList.add("ql-image"),n.addEventListener("change",(function(){var e,r,l;return T.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(console.log("detected file"),null==n.files||null==n.files[0]){o.next=11;break}return e="quill-images/".concat(t.getTime(),"/").concat(n.files[0].name),o.next=5,T.a.awrap(Ce(e,n.files[0]));case 5:r=o.sent,console.log(r),l=a.getSelection(!0),a.updateContents((new qe.a).retain(l.index).delete(l.length).insert({image:r}),"user"),n.value="",document.body.removeChild(n);case 11:case"end":return o.stop()}}))})),document.body.appendChild(n)),n.click()}}(l))}),[l]),a.fieldType!==me.a.richText?r.a.createElement(r.a.Fragment,null):r.a.createElement(ge,null,r.a.createElement(ye.a,{value:a.editorValue,ref:l,onChange:function(e){a.setEditorValue(e)},theme:"snow",className:t.quillEditor,modules:{imageDrop:!0,toolbar:{container:[["bold","italic","underline"],[{header:[1,2,3,4,!1]}],[{list:"bullet"},{list:"ordered"}],[{indent:"-1"},{indent:"+1"}],["blockquote","code-block","image","video"],["link"]]},clipboard:{matchVisual:!1}}}))},Re=a(388),Te=a(20),Ne=a.n(Te),Ae=a(228),ze=a(39),Fe=function(e,t){return Object(N.a)({},e,{},t)},Le={rows:[],prevFilters:null,prevPath:null,prevOrderBy:null,path:null,filters:[],prevLimit:0,limit:20,loading:!0,cap:1e3},Be=function(e){var t=Object(n.useContext)(ze.a),a=Object(n.useReducer)(Fe,Object(N.a)({},Le,{},e)),l=Object(c.a)(a,2),o=l[0],i=l[1];Object(n.useEffect)((function(){var e=o.prevFilters,a=o.filters,n=o.prevLimit,l=o.prevOrderBy,c=o.limit,u=o.prevPath,s=o.path,d=o.orderBy,m=o.unsubscribe;return Object(Re.a)(e,a)&&n===c&&u===s&&l===d||s&&function(e,a,n){o.prevPath&&o.path!==o.prevPath&&o.unsubscribe(),i({prevFilters:e,prevLimit:a,prevPath:o.path,prevOrderBy:o.orderBy,loading:!0});var l=ke.c.collection(o.path);e.forEach((function(e){l=l.where(e.key,e.operator,e.value)})),n&&n.forEach((function(e){l=l.orderBy(e.key,e.direction)}));var c=l.limit(a).onSnapshot((function(e){if(e.docs.length>0){var t=e.docs.map((function(e){var t=e.data(),a=e.id,n=e.ref;return Object(N.a)({},t,{id:a,ref:n})})).filter((function(e){return"_FIRETABLE_"!==e.id}));i({rows:t,loading:!1})}else i({rows:[],loading:!1})}),(function(e){if(e.message.includes("indexes?create_composite=")){var a="https://console.firebase.google.com/project/".concat("test-firetable-8656c","/database/firestore/")+"indexes?create_composite="+e.message.split("indexes?create_composite=")[1];console.log(a),t.open({message:"needs a new index",duration:1e4,action:r.a.createElement(h.a,{color:"secondary",onClick:function(){window.open(a,"_blank")}},"create")})}}));i({unsubscribe:c})}(a,c,d),function(){m&&o.unsubscribe()}}),[o.filters,o.limit,o.path,o.orderBy]);var u={deleteRow:function(e,t){o.rows.splice(e,1),i({rows:o.rows}),ke.c.collection(o.path).doc(t).delete()},setTable:function(e,t){e!==o.path&&i({path:e,rows:[]}),t&&i({filters:t})},addRow:function(e){var t;return T.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,T.a.awrap(ke.c.collection(o.path).add(Object(N.a)({createdAt:Ne.a.firestore.FieldValue.serverTimestamp(),updatedAt:Ne.a.firestore.FieldValue.serverTimestamp()},e)));case 2:t=a.sent,e&&Object(Ae.b)({collection:t.parent.path,id:t.id,doc:Object(N.a)({},e)});case 4:case"end":return a.stop()}}))},moreRows:function(e){i({limit:o.limit+(e||20)})},dispatch:i};return[o,u]},He=a(389),Pe=function(e,t,a){var n=Object(He.a)(e),r=Object(c.a)(n,2),l=r[0],o=r[1],i=Be({path:e,filters:t,orderBy:a}),u=Object(c.a)(i,2),s=u[0],d=u[1];return{tableState:{columns:l.columns,config:{rowHeight:l.rowHeight},rows:s.rows,rowsLimit:s.limit,loadingRows:s.loading,loadingColumns:l.loading},tableActions:{column:{add:o.add,resize:o.resize,rename:o.rename,update:o.updateColumn,remove:o.remove,reorder:o.reorder},row:{add:d.addRow,delete:d.deleteRow,more:d.moreRows},table:{updateConfig:o.updateConfig,set:function(e,t,a){e===s.path&&t===s.filters||(o.setTable(e),d.setTable(e,t))},orderBy:function(e){d.dispatch({orderBy:e})},filter:function(e){d.dispatch({filters:e})}}}}},Ie=function(e){var t=e.children,a=Object(n.useState)(null),l=Object(c.a)(a,2),o=l[0],i=l[1],u=Object(n.useState)(),s=Object(c.a)(u,2),d=s[0],m=s[1],p=Object(n.useState)(null),b=Object(c.a)(p,2),f=b[0],h=b[1];return r.a.createElement(se.a.Provider,{value:{cancel:function(){h(null),i(null),m(null)},close:function(){f!==d.value&&d.onSubmit(f),h(null),i(null),m(null)},open:function(e,t){i(t),m(e),h(e.value)},fieldType:o,editorValue:f,setEditorValue:h}},t)},_e=Object(n.lazy)((function(){return a.e(33).then(a.bind(null,784))})),De=Object(n.lazy)((function(){return Promise.all([a.e(1),a.e(9),a.e(19)]).then(a.bind(null,781))})),We=Object(n.lazy)((function(){return Promise.all([a.e(10),a.e(32)]).then(a.bind(null,772))})),Ve=Object(n.lazy)((function(){return a.e(20).then(a.bind(null,774))})),Ue=Object(n.lazy)((function(){return a.e(18).then(a.bind(null,785))})),Ge=ke.d.httpsCallable(Ae.a.deleteAlgoliaRecord);var Me=function(e){var t=e.collection,a=e.filters,l=Object(n.useState)([]),o=Object(c.a)(l,2),i=o[0],u=(o[1],Pe(t,a,i)),s=u.tableState,d=u.tableActions,m=Object(n.useState)({row:{},column:{}}),p=Object(c.a)(m,2),b=p[0],g=p[1],E=Object(n.useState)({config:void 0,collection:"",onSubmit:void 0}),v=Object(c.a)(E,2),w=v[0],y=v[1];Object(n.useEffect)((function(){d.table.set(t,a,i)}),[t,a]);var O=J(),j=Object(n.useState)(null),q=Object(c.a)(j,2),k=q[0],R=q[1],L=Object(n.useState)(),H=Object(c.a)(L,2),_=H[0],W=H[1],U=function(){W(null),R(null)},M=function(e){return function(t){return r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null)},r.a.createElement(Ve,Object.assign({},t,{onSubmit:Object(Y.d)(e.key,t.row),collectionPath:e.collectionPath,config:e.config,setSearch:y})))}},X=function(e){return function(t){U(),R(t.currentTarget),W(e)}},$=function(e){var t=e.column;switch(t.key){case"new":return r.a.createElement("div",{className:O.header},t.name,r.a.createElement(f.a,{size:"small",onClick:X(e)},r.a.createElement(G.a,null)));default:return r.a.createElement(A.a,{title:e.column.key},r.a.createElement(z.a,{container:!0,className:O.header,alignItems:"center",wrap:"nowrap"},r.a.createElement(z.a,{item:!0,onClick:function(){navigator.clipboard.writeText(e.column.key)},className:O.columnIconContainer},Object(me.c)(e.column.type)),r.a.createElement(z.a,{item:!0,xs:!0,onClick:function(){navigator.clipboard.writeText(e.column.key)},className:O.columnNameContainer},r.a.createElement(F.a,{variant:"h6",noWrap:!0,className:O.columnName,component:"span"},e.column.name)),r.a.createElement(z.a,{item:!0},r.a.createElement(f.a,{color:i[0]&&i[0].key===t.key?"primary":"default",disableFocusRipple:!0,size:"small",onClick:function(){if(console.log(i,i[0]&&i[0].key===t.key,i[0]&&"asc"===i[0].direction),i[0]&&i[0].key===t.key&&"asc"===i[0].direction){var e=[{key:t.key,direction:"desc"}];d.table.orderBy(e)}else{var a=[{key:t.key,direction:"asc"}];d.table.orderBy(a)}}},r.a.createElement(B.a,null)),r.a.createElement(f.a,{disableFocusRipple:!0,size:"small",onClick:X(e)},r.a.createElement(P.a,null)))))}},Q=[];!s.loadingColumns&&s.columns&&(Q=s.columns.filter((function(e){return!e.hidden})).map((function(e){return Object(N.a)({draggable:!0,editable:Object(Y.b)(e.type),resizable:!0,headerRenderer:$,formatter:e.type===me.a.documentSelect?M(e):Object(Y.a)(e),editor:e.type===me.a.singleSelect&&Object(Y.e)(e.options)},e,{width:e.width?e.width>380?380:e.width:150})}))).push({isNew:!0,key:"new",name:"Add column",type:me.a.last,width:160,headerRenderer:$,formatter:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{message:{title:"Delete Row",body:"Are you sure you want to delete this row?",confirm:r.a.createElement(r.a.Fragment,null,r.a.createElement(D.a,null)," Delete")}},r.a.createElement(f.a,{color:"primary",onClick:function(){return T.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e.row.ref.delete(),t.next=3,T.a.awrap(Ge({id:e.row.ref.id,collection:e.row.ref.parent.path}));case 3:case"end":return t.stop()}}))}},r.a.createElement(D.a,null))),r.a.createElement(f.a,{color:"secondary",onClick:function(){var t=Object(N.a)({},e.row);delete t.ref,delete t.rowHeight,delete t.updatedAt,delete t.createdAt,d.row.add(t)}},r.a.createElement(V.a,null)))}});var Z=s.config.rowHeight,ee=0!==s.rows.length?[].concat(Object(S.a)(s.rows.map((function(e){return Object(N.a)({rowHeight:Z},e)}))),[{}]):[],te=function(e){if(a){var t=a.reduce((function(e,t){return Object(N.a)({},e,Object(x.a)({},t.key,t.value))}),{});d.row.add(Object(N.a)({},t,{},e))}else d.row.add(Object(N.a)({},e))};return r.a.createElement(Ie,null,r.a.createElement(n.Suspense,{fallback:r.a.createElement(K.a,{message:"Loading header"})},r.a.createElement(_e,{selectedCell:b}),r.a.createElement(De,{tableActions:d,collection:t,rowHeight:Z,updateConfig:d.table.updateConfig,columns:Q,filters:a,addRow:te})),s.loadingColumns?r.a.createElement(K.a,{message:"Fetching columns"}):r.a.createElement(ue,{key:"".concat(t,"-grid"),onHeaderDrop:function(e,t){d.column.reorder(e,t)},rowHeight:Z,columns:Q,RowRenderer:function(e){var t=e.renderBaseRow,a=Object(C.a)(e,["renderBaseRow"]);return ee.length===a.idx+1?r.a.createElement(h.a,{onClick:function(){te()}},"Add a new row"):t(a)},handleRowGetter:function(e){return s.rowsLimit-e===1&&d.row.more(),ee[e]},tableHeight:"calc(100vh - 120px)",onGridRowsUpdated:Y.c,rows:ee,resizeColumn:d.column.resize,loadingRows:s.loadingRows,addRow:te,setSelectedCell:g}),r.a.createElement(n.Suspense,{fallback:r.a.createElement(K.a,{message:"Loading helpers"})},r.a.createElement(Ue,{handleClose:U,anchorEl:k,column:_&&_.column,actions:d.column}),r.a.createElement(We,{searchData:w,clearSearch:function(){y({config:void 0,collection:"",onSubmit:void 0})}}),r.a.createElement(Se,null),r.a.createElement(ve,null)))};function Xe(){var e=Object(O.a)(),t=e.location.pathname.split("/")[2],a=[],n=o.a.parse(e.location.search);return"string"===typeof n.filters&&(a=JSON.parse(n.filters)),r.a.createElement(k,null,r.a.createElement(Me,{collection:t,filters:a}))}a.d(t,"default",(function(){return Xe}))}}]);
//# sourceMappingURL=12.4c2013f9.chunk.js.map